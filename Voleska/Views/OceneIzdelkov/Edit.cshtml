@model Voleska.Models.OcenaIzdelka

@{
    ViewData["Title"] = "Edit";
}

<script type="text/javascript">

    jQuery(document).ready(function ($) {

     
        $(".btnrating").on('click', (function (e) {

            var previous_value = $("#selected_rating").val();

            var selected_value = $(this).attr("data-attr");
            $("#selected_rating").val(selected_value);

            $(".selected-rating").empty();
            $(".selected-rating").html(selected_value);

            for (i = 1; i <= selected_value; ++i) {
                $("#rating-star-" + i).toggleClass('btn-warning');
                $("#rating-star-" + i).toggleClass('btn-default');
            }

            for (ix = 1; ix <= previous_value; ++ix) {
                $("#rating-star-" + ix).toggleClass('btn-warning');
                $("#rating-star-" + ix).toggleClass('btn-default');
            }

        }));

        var showStars = $("#selected_rating").val();

        for (j = 1; j <= showStars; ++j) {
            $("#rating-star-" + j).toggleClass('btn-warning');
            $("#rating-star-" + j).toggleClass('btn-default');
        }


    });

</script>


<h1>Uredi Oceno za izdelek <span class="text-success">@Model.Izdelek.Ime</span></h1>

<hr />
<div class="row">
    <div class="col-md-4">
        <form asp-action="Edit" asp-controller="OceneIzdelkov" method="post" id="better-rating-form">
            <div class="form-group" id="rating-ability-wrapper">
                <label class="control-label" for="rating">
                    <input type="hidden" id="selected_rating" name="selected_rating" required="required" value="@Model.Ocena">
                    <input type="hidden" id="izdelekId" name="izdelekId" value="@Model.IzdelekID" />
                    <input type="hidden" asp-for="ID" />
                </label>
                <h2 class="bold rating-header" style="">
                    <span class="selected-rating">@Model.Ocena</span><small> / 5</small>
                </h2>
                <button type="button" class="btnrating btn btn-default btn-lg" data-attr="1" id="rating-star-1">
                    <i class="fa fa-star" aria-hidden="true"></i>
                </button>
                <button type="button" class="btnrating btn btn-default btn-lg" data-attr="2" id="rating-star-2">
                    <i class="fa fa-star" aria-hidden="true"></i>
                </button>
                <button type="button" class="btnrating btn btn-default btn-lg" data-attr="3" id="rating-star-3">
                    <i class="fa fa-star" aria-hidden="true"></i>
                </button>
                <button type="button" class="btnrating btn btn-default btn-lg" data-attr="4" id="rating-star-4">
                    <i class="fa fa-star" aria-hidden="true"></i>
                </button>
                <button type="button" class="btnrating btn btn-default btn-lg" data-attr="5" id="rating-star-5">
                    <i class="fa fa-star" aria-hidden="true"></i>
                </button>
            </div>

            <textarea name="rate" id="" cols="50" rows="10" required>@Model.Komentar</textarea>
            <div>
                <button type="submit" class="btn btn-warning mt-3">Oddaj Oceno!</button>
            </div>
        </form>
    </div>
</div>

<div>
    <a asp-action="Details" asp-controller="Katalog" asp-route-id="@Model.IzdelekID" asp-route-naKomentarje="true">Back to List</a>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}
