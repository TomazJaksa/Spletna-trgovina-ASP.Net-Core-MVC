@model Voleska.Models.OcenaIzdelka

@{
    ViewData["Title"] = "Uredi";
}

<script type="text/javascript">

    jQuery(document).ready(function ($) {

     
        $(".btnrating").on('click', (function (e) {

            var previous_value = $("#selected_rating").val();

            var selected_value = $(this).attr("data-attr");
            $("#selected_rating").val(selected_value);

            $(".selected-rating").empty();
            $(".selected-rating").html(selected_value);

            for (i = 1; i <= selected_value; ++i) {
                $("#rating-star-" + i).toggleClass('btn-warning');
                $("#rating-star-" + i).toggleClass('btn-default');
            }

            for (ix = 1; ix <= previous_value; ++ix) {
                $("#rating-star-" + ix).toggleClass('btn-warning');
                $("#rating-star-" + ix).toggleClass('btn-default');
            }

        }));

        var showStars = $("#selected_rating").val();

        for (j = 1; j <= showStars; ++j) {
            $("#rating-star-" + j).toggleClass('btn-warning');
            $("#rating-star-" + j).toggleClass('btn-default');
        }


    });

</script>


<h1 class="text-center">Uredi oceno za izdelek @Model.Izdelek.Ime</h1>

<hr />
<div class="row d-flex justify-content-center">
    <div class="col-md-4">
        <form asp-action="Edit" asp-controller="OceneIzdelkov" method="post" id="better-rating-form">
            <div class="form-group d-flex justify-content-center" id="rating-ability-wrapper">
                <label class="control-label" for="rating">
                    <input type="hidden" id="selected_rating" name="selected_rating" required="required" value="@Model.Ocena">
                    <input type="hidden" id="izdelekId" name="izdelekId" value="@Model.IzdelekID" />
                    <input type="hidden" id="imeTipaIzdelka" name="imeTipaIzdelka" value="@ViewBag.TipIzdelka" />
                    <input type="hidden" asp-for="ID" />
                </label>
                <h2 class="bold rating-header text-center my-auto mx-3" style="">
                    <span class="selected-rating">@Model.Ocena</span><small> / 5</small>
                </h2>
                <button type="button" class="btnrating btn btn-default btn-sm py-1 px-2" data-attr="1" id="rating-star-1">
                    <i class="fa fa-star" aria-hidden="true"></i>
                </button>
                <button type="button" class="btnrating btn btn-default btn-sm py-1 px-2" data-attr="2" id="rating-star-2">
                    <i class="fa fa-star" aria-hidden="true"></i>
                </button>
                <button type="button" class="btnrating btn btn-default btn-sm py-1 px-2" data-attr="3" id="rating-star-3">
                    <i class="fa fa-star" aria-hidden="true"></i>
                </button>
                <button type="button" class="btnrating btn btn-default btn-sm py-1 px-2" data-attr="4" id="rating-star-4">
                    <i class="fa fa-star" aria-hidden="true"></i>
                </button>
                <button type="button" class="btnrating btn btn-default btn-sm py-1 px-2" data-attr="5" id="rating-star-5">
                    <i class="fa fa-star" aria-hidden="true"></i>
                </button>
            </div>

            <div class="mt-5 md-form amber-textarea active-amber-textarea">
                <i class="fas fa-pencil-alt prefix"></i>
                <textarea name="rate" id="" required class="md-textarea form-control p-3" cols="50" rows="3">@Model.Komentar</textarea>
                <label for="opombe">Vzemi si trenutek in povej kako si kaj zadovoljen z nakupom tega izdelka :)</label>
            </div>

            <div class="d-flex justify-content-center">
                <button type="submit" class="btn btn-warning mt-3">Oddaj Oceno!</button>
            </div>
        </form>
    </div>
</div>

<div>
    <a class="customColor" asp-action="Details" asp-controller="Katalog" asp-route-id="@Model.IzdelekID" asp-route-imeTipaIzdelka="@ViewBag.TipIzdelka" asp-route-naKomentarje="true">Nazaj na seznam</a>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}
